;Constantes
PIO EQU 30H
PIC EQU 20H
EOI EQU 20H
TIMER EQU 10H
ID_CLK EQU 10

ORG 40
 DW RUT_CLK

ORG 3000H
 RUT_CLK: NOP
 INC CL
 CMP CL, 0FFH
 JNZ SALTEAR
  MOV AL, 0FFH
  OUT PIC+1, AL; Deshabilitar las interrupciones del TIMER
  JMP FIN
SALTEAR: MOV AL, CL
 OUT PIO+1, AL
 MOV AL, 0
 OUT TIMER, AL
 FIN: MOV AL, EOI
 OUT PIC, AL
 IRET

ORG 2000H
CLI
 MOV CX, 0; Setear contador aux
 MOV AL, 0
 OUT PIO+3, AL; CB
 OUT PIO+1, AL; PB
 MOV AL, 0FDH
 OUT PIC+1, AL; IMR
 MOV AL, ID_CLK
 OUT PIC+5, AL; TIMER
 MOV AL, 1
 OUT TIMER+1, AL; COMP
 MOV AL, 0
 OUT TIMER, AL; CONT
STI

LOOP: JMP LOOP

INT 0
END

;peak lobotomy

PIC EQU 20H
ID_F10 EQU 10
META EQU 30H

ORG 40
  DW RUT_F10

ORG 1000H
  MSJ DB "EN SUS MARCAS. "
  MSJ2 DB "LISTOS. "
  MSJ3 DB "YA! "
  WIN DB "GANÓ EL USUARIO"
  LOSE DB "GANÓ LA PC"
  FIN DB ?

ORG 3000H
  RUT_F10: INC CX
    MOV AL, 20H
    OUT PIC, AL
    IRET

ORG 2000H
  MOV BX, OFFSET MSJ
  MOV AL, OFFSET MSJ2 - OFFSET MSJ
  INT 7
  MOV BX, OFFSET MSJ2
  MOV AL, OFFSET MSJ3 - OFFSET MSJ2
  INT 7
  MOV BX, OFFSET MSJ3
  MOV AL, OFFSET WIN - OFFSET MSJ3
  INT 7
  CLI
    MOV AL, 0FEH
    OUT PIC+1, AL
    MOV AL, ID_F10
    OUT PIC+4, AL
    MOV CX, 0
    MOV DX, 0
  STI

  LOOP: INC DX
      CMP CX, META
        JZ GANADOR
      CMP DX, META
        JZ PERDEDOR
      JNZ LOOP

  GANADOR: MOV BX, OFFSET WIN
    MOV AL, OFFSET LOSE - OFFSET WIN
    INT 7
    JMP TERMINAR
  PERDEDOR: MOV BX, OFFSET LOSE
    MOV AL, OFFSET FIN - OFFSET LOSE
    INT 7
  TERMINAR: OR AL, 1
  OUT PIC+1, AL
  INT 0
  END
